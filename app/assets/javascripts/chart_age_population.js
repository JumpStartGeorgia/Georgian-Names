$(function () {
  if (gon.chart_age_population) {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'chart_age_population',
                type: 'spline'
            },
            title: {
                text: 'Number of People With a Given Age'
            },
            xAxis: {
                title: {
                    text: 'Age'
                },
                min: 18
            },
            yAxis: {
                title: {
                    text: '# of People'
                },
                min: 0
            },
            tooltip: {
                crosshairs: true,
                formatter: function() {
                        return this.x +' years old (' + (2012-this.x) + '): '+ Highcharts.numberFormat(this.y,0,',');
                }
            },
            series: [{
                showInLegend: false,
                cursor: 'pointer',
                point: {
                        events: {
                            click: function() {
                                location.href = gon.year_path + (2012-this.x);
                            }
                        }
                    },
                data: [
[18,42850],[19,59001],[20,68182],[21,74925],[22,75672],[23,69809],[24,68939],[25,71047],[26,73454],[27,73829],[28,72392],[29,69648],[30,69192],[31,69375],[32,67751],[33,67944],[34,67474],[35,66598],[36,66953],[37,65382],[38,64878],[39,63752],[40,62199],[41,64212],[42,63640],[43,61066],[44,62040],[45,60408],[46,62256],[47,64286],[48,66877],[49,68732],[50,69323],[51,70601],[52,70872],[53,66918],[54,64000],[55,60775],[56,60415],[57,58476],[58,56368],[59,49760],[60,53784],[61,49498],[62,49554],[63,46895],[64,41951],[65,41399],[66,34289],[67,26241],[68,22138],[69,18400],[70,29441],[71,35920],[72,43752],[73,39291],[74,40185],[75,38062],[76,32114],[77,28688],[78,23329],[79,21638],[80,22827],[81,17456],[82,20388],[83,15616],[84,15687],[85,12475],[86,10081],[87,8269],[88,5791],[89,4065],[90,3286],[91,2010],[92,2299],[93,1069],[94,999],[95,564],[96,468],[97,437],[98,299],[99,197],[100,194],[101,56],[102,130],[103,46],[104,45],[105,34],[106,33],[107,26],[108,12],[109,7],[110,12],[111,7],[112,11],[113,1],[115,2],[116,1],[118,1],[122,2],[129,1],[132,1]

              ]
            }]
        });
    });
  }    
});